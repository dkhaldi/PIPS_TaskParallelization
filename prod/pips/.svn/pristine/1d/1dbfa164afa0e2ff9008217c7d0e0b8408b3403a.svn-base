(function(a){a.fn.linedtextarea=function(b){var c=a.extend({},a.fn.linedtextarea.defaults,b);var d=function(e,f,g){while((e.height()-f)<=0){if(g==c.selectedLine){e.append("<div class='lineno lineselect'>"+g+"</div>")}else{e.append("<div class='lineno'>"+g+"</div>")}g++}return g};return this.each(function(){var g=1;var p=a(this);p.attr("wrap","off");p.css({resize:"none"});var i=p.outerWidth();p.wrap("<div class='linedtextarea'></div>");var h=p.parent().wrap("<div class='linedwrap' style='width:"+i+"px'></div>");var n=h.parent();n.prepend("<div class='lines' style='width:50px'></div>");var l=n.find(".lines");l.height(p.height()+6);l.append("<div class='codelines'></div>");var o=l.find(".codelines");g=d(o,l.height(),1);if(c.selectedLine!=-1&&!isNaN(c.selectedLine)){var q=parseInt(p.height()/(g-2));var j=parseInt(q*c.selectedLine)-(p.height()/2);p[0].scrollTop=j}var f=l.outerWidth();var m=parseInt(n.css("border-left-width"))+parseInt(n.css("border-right-width"))+parseInt(n.css("padding-left"))+parseInt(n.css("padding-right"));var e=i-m;var k=i-f-m-20;p.width(k);n.width(e);p.scroll(function(r){var t=a(this)[0];var u=t.scrollTop;var s=t.clientHeight;o.css({"margin-top":(-1*u)+"px"});g=d(o,u+s,g)});p.resize(function(r){var s=a(this)[0];l.height(s.clientHeight+6)})})};a.fn.linedtextarea.defaults={selectedLine:-1,selectedClass:"lineselect"}})(jQuery);