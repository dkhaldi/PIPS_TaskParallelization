delete tiling05

# Cannot be set because the header files included in the source code
# generated by PIPS are not compatible with gcc

#setproperty ABORT_ON_USER_ERROR TRUE

create tiling05 tiling05.c

echo
echo Execution of initial code
echo

shell gcc tiling05.c -o tiling05.database/a.out
shell ./tiling05.database/a.out >tiling05.database/initial_results

echo
echo Initial code before tiling
echo

# To be sure to have pips_min and pips_max in the symbol table
display PRINTED_FILE[%ALLFUNC]

apply LOOP_TILING[tiling05]
l100
 5 5
-5 5

echo
echo After tiling
echo

display PRINTED_FILE[tiling05]

echo
echo Execution of tiled code
echo

apply UNSPLIT

close

shell gcc tiling05.database/Src/tiling05.c run_time/pips_run_time.c -o tiling05.database/a.out
shell ./tiling05.database/a.out >tiling05.database/final_results

echo
echo Differences if any
echo

shell diff tiling05.database/initial_results  tiling05.database/final_results

delete tiling05
quit
