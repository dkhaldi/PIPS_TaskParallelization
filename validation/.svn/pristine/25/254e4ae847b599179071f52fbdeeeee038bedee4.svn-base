setproperty ABORT_ON_USER_ERROR TRUE
delete fulguro_convol_3x3-2

setenv PIPS_CPP_FLAGS=" -D__u64='unsigned long long' -D__s64='long long' -D__signed__=signed -DFLGR_PROC_NUMBER=1 -D__GLIBC_HAVE_LONG_LONG -Iinclude/fulguro"

create fulguro_convol_3x3-2 fulguro_convol_3x3.c

setproperty C89_CODE_GENERATION TRUE
setproperty INLINING_USE_INITIALIZATION_LIST FALSE

apply SIMPLIFY_SUBSCRIPTS[%ALL]
display PRINTED_FILE[%ALLFUNC]

apply INLINING_SIMPLE[flgr2d_convolution_fgUINT16]
display PRINTED_FILE[flgr2d_convolution]

apply UNFOLDING[fulguro_convol_3x3!flgr_get_array_fgUINT16]
display PRINTED_FILE[fulguro_convol_3x3!flgr_get_array_fgUINT16]
apply INLINING[fulguro_convol_3x3!flgr_set_data_array_vector_fgUINT16]
apply INLINING[fulguro_convol_3x3!flgr_get_array_fgUINT16]
apply INLINING[fulguro_convol_3x3!flgr_set_array_fgUINT16]

apply INLINING[flgr2d_get_neighborhood_fgUINT16]
#setproperty INLINING_CALLERS "flgr2d_get_neighborhood_fgUINT16"
#apply INLINING[flgr2d_get_neighborhood_fgUINT16]
#setproperty INLINING_CALLERS "flgr2d_native_dilate_6_connexity_fgUINT16"
#apply INLINING[flgr2d_get_neighborhood_fgUINT16]
#setproperty INLINING_CALLERS "flgr2d_native_dilate_4_connexity_fgUINT16"
#apply INLINING[flgr2d_get_neighborhood_fgUINT16]
#setproperty INLINING_CALLERS "flgr2d_native_dilate_8_connexity_fgUINT16"
#apply INLINING[flgr2d_get_neighborhood_fgUINT16]

display PRINTED_FILE[flgr2d_native_dilate_4_connexity_fgUINT16]
apply INLINING[fulguro_convol_3x3!flgr2d_get_data_array_fgUINT16]
display PRINTED_FILE[flgr2d_raster_slide_window_fgUINT16]
apply INLINING[fulguro_convol_3x3!flgr_get_data_array_vector_fgUINT16]
display PRINTED_FILE[flgr2d_raster_slide_window_fgUINT16]
display PRINTED_FILE[flgr2d_get_nhb_convolution_fgUINT16]

apply INLINING_SIMPLE[flgr2d_raster_slide_window_fgUINT16]

apply INLINING_SIMPLE[flgr2d_convolution]

module main
display PRINTED_FILE

quit

